<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Task Logs Tracker</title>

<style>
/* General Body */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 20px;
    background-color: #f9f9f9;
    color: #333;
}

/* Headings */
h1 {
    text-align: center;
    color: #007bff;
    margin-bottom: 30px;
}

h2 {
    margin-top: 40px;
    color: #444;
}

h3 {
    margin-bottom: 10px;
    color: #555;
}

/* Form Container */
.form-container {
    background-color: #fff;
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 600px;
    margin-bottom: 40px;
}

.form-container label {
    display: block;
    margin: 10px 0 5px;
    font-weight: 600;
}

.form-container input,
.form-container select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
    box-sizing: border-box;
}

.form-container input:focus,
.form-container select:focus {
    border-color: #007bff;
    outline: none;
}

/* Buttons */
button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 12px 20px;
    border-radius: 30px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
}

button:hover {
    background-color: #0056b3;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

th, td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid #e0e0e0;
    font-size: 14px;
}

th {
    background-color: #007bff;
    color: white;
    font-weight: 600;
}

tr:nth-child(even) {
    background-color: #f7f7f7;
}

tr:hover {
    background-color: #e6f0ff;
}

/* Responsive */
@media screen and (max-width: 768px) {
    .form-container {
        padding: 15px;
    }

    th, td {
        padding: 8px;
        font-size: 13px;
    }

    button {
        width: 100%;
    }
}
</style>


</head>
<body>

<h1>Task Logs Tracker</h1>

<div class="form-container">
  <h3>Add Daily Task</h3>
  <label for="taskDate">Date:</label>
  <input type="date" id="taskDate" required>
  
  <label for="employeeSelect">Employee:</label>
  <select id="employeeSelect">
    <option value="John Doe">John Doe</option>
    <option value="Jane Smith">Jane Smith</option>
    <option value="Alice Lee">Alice Lee</option>
  </select>
  
  <label for="taskDesc">Task:</label>
  <input type="text" id="taskDesc" placeholder="Task description" required>
  
  <label for="taskStatus">Status:</label>
  <select id="taskStatus">
    <option value="Completed">Completed</option>
    <option value="Pending">Pending</option>
  </select>
  
  <label for="taskHours">Hours:</label>
  <input type="number" id="taskHours" min="0" step="0.5" required>
  
  <button onclick="addTask()">Add Task</button>
</div>

<h2>Daily Task Logs</h2>
<table id="dailyLogs">
  <thead>
    <tr>
      <th>Date</th>
      <th>Employee</th>
      <th>Task</th>
      <th>Status</th>
      <th>Hours</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Weekly Summary</h2>
<table id="weeklyLogs">
  <thead>
    <tr>
      <th>Week (Start)</th>
      <th>Employee</th>
      <th>Total Tasks</th>
      <th>Completed</th>
      <th>Pending</th>
      <th>Total Hours</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
<a href= "index.html"><button>Back to OJT Monitoring System</button></a>
<script>
let dailyData = [];

function addTask() {
  const date = document.getElementById('taskDate').value;
  const name = document.getElementById('employeeSelect').value;
  const task = document.getElementById('taskDesc').value;
  const status = document.getElementById('taskStatus').value;
  const hours = parseFloat(document.getElementById('taskHours').value);

  if (!date || !task || isNaN(hours)) {
    alert("Please fill all fields!");
    return;
  }

  dailyData.push({ date, name, task, status, hours });
  updateDailyLogs();
  updateWeeklyLogs();

  // Clear form
  document.getElementById('taskDesc').value = '';
  document.getElementById('taskHours').value = '';
}

function updateDailyLogs() {
  const dailyTable = document.querySelector("#dailyLogs tbody");
  dailyTable.innerHTML = "";
  dailyData.forEach(log => {
    const row = `<tr>
      <td>${log.date}</td>
      <td>${log.name}</td>
      <td>${log.task}</td>
      <td>${log.status}</td>
      <td>${log.hours}</td>
    </tr>`;
    dailyTable.innerHTML += row;
  });
}

function updateWeeklyLogs() {
  const weeklyTable = document.querySelector("#weeklyLogs tbody");
  weeklyTable.innerHTML = "";
  const summary = {};

  dailyData.forEach(log => {
    const weekStart = getWeekStartDate(log.date);
    const key = weekStart + '_' + log.name;

    if (!summary[key]) {
      summary[key] = { week: weekStart, name: log.name, total: 0, completed: 0, pending: 0, hours: 0 };
    }

    summary[key].total += 1;
    summary[key].hours += log.hours;
    if (log.status === "Completed") summary[key].completed += 1;
    else summary[key].pending += 1;
  });

  Object.values(summary).forEach(entry => {
    const row = `<tr>
      <td>${entry.week}</td>
      <td>${entry.name}</td>
      <td>${entry.total}</td>
      <td>${entry.completed}</td>
      <td>${entry.pending}</td>
      <td>${entry.hours}</td>
    </tr>`;
    weeklyTable.innerHTML += row;
  });
}

// Helper to get week start date (Monday)
function getWeekStartDate(dateStr) {
  const date = new Date(dateStr);
  const day = date.getDay();
  const diff = date.getDate() - day + (day === 0 ? -6 : 1);
  const weekStart = new Date(date.setDate(diff));
  return weekStart.toISOString().split('T')[0];
}
</script>

</body>
</html>
