<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Attendance Tracker</title>
<style>

/* General Body */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 20px;
    background-color: #f9f9f9;
    color: #333;
}

/* Headings */
h1 {
    text-align: center;
    color: #007bff;
    margin-bottom: 30px;
}

h2 {
    margin-top: 40px;
    color: #444;
}

h3 {
    margin-bottom: 15px;
    color: #555;
}

/* Form Container */
.form-container {
    background-color: #fff;
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 600px;
    margin-bottom: 40px;
}

.form-container label {
    display: block;
    margin: 10px 0 5px;
    font-weight: 600;
}

.form-container input,
.form-container select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
    box-sizing: border-box;
}

.form-container input:focus,
.form-container select:focus {
    border-color: #007bff;
    outline: none;
}

/* Buttons */
button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
}

button:hover {
    background-color: #0056b3;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

th, td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid #e0e0e0;
    font-size: 14px;
}

th {
    background-color: #007bff;
    color: white;
    font-weight: 600;
}

tr:nth-child(even) {
    background-color: #f7f7f7;
}

tr:hover {
    background-color: #e6f0ff;
}

/* Attendance Status Colors */
td.status-Present {
    color: green;
    font-weight: bold;
}

td.status-Absent {
    color: red;
    font-weight: bold;
}

td.status-Late {
    color: orange;
    font-weight: bold;
}

/* Responsive */
@media screen and (max-width: 768px) {
    .form-container {
        padding: 15px;
    }

    th, td {
        padding: 8px;
        font-size: 13px;
    }

    button {
        width: 100%;
    }
}


</style>
</head>
<body>

<h1>Student Attendance Tracker</h1>

<div class="form-container">
  <h3>Mark Attendance</h3>
  <label for="attendanceDate">Date:</label>
  <input type="date" id="attendanceDate" required>

  <label for="studentSelect">Student:</label>
  <select id="studentSelect">
    <option value="John Doe">John Doe</option>
    <option value="Jane Smith">Jane Smith</option>
    <option value="Alice Lee">Alice Lee</option>
    <option value="Mark Tan">Mark Tan</option>
  </select>

  <label for="statusSelect">Status:</label>
  <select id="statusSelect">
    <option value="Present">Present</option>
    <option value="Absent">Absent</option>
    <option value="Late">Late</option>
  </select>

  <button onclick="markAttendance()">Mark Attendance</button>
</div>

<h2>Attendance Records</h2>
<table id="attendanceTable">
  <thead>
    <tr>
      <th>Date</th>
      <th>Student</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Attendance Summary (Weekly)</h2>
<table id="summaryTable">
  <thead>
    <tr>
      <th>Week Start</th>
      <th>Student</th>
      <th>Present</th>
      <th>Absent</th>
      <th>Late</th>
      <th>Total Days</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
<a href= "index.html"><button>Back to OJT Monitoring System</button></a>
<script>
let attendanceData = [];

function markAttendance() {
  const date = document.getElementById('attendanceDate').value;
  const student = document.getElementById('studentSelect').value;
  const status = document.getElementById('statusSelect').value;

  if (!date) {
    alert("Please select a date!");
    return;
  }

  // Update existing or add new
  const existingIndex = attendanceData.findIndex(a => a.date === date && a.student === student);
  if (existingIndex >= 0) {
    attendanceData[existingIndex].status = status;
  } else {
    attendanceData.push({ date, student, status });
  }

  updateAttendanceTable();
  updateSummaryTable();
}

function updateAttendanceTable() {
  const tableBody = document.querySelector("#attendanceTable tbody");
  tableBody.innerHTML = "";

  attendanceData.sort((a, b) => new Date(a.date) - new Date(b.date));

  attendanceData.forEach(record => {
    const row = `<tr>
      <td>${record.date}</td>
      <td>${record.student}</td>
      <td>${record.status}</td>
    </tr>`;
    tableBody.innerHTML += row;
  });
}

// Helper to get week start date (Monday)
function getWeekStartDate(dateStr) {
  const date = new Date(dateStr);
  const day = date.getDay();
  const diff = date.getDate() - day + (day === 0 ? -6 : 1);
  const weekStart = new Date(date.setDate(diff));
  return weekStart.toISOString().split('T')[0];
}

function updateSummaryTable() {
  const tableBody = document.querySelector("#summaryTable tbody");
  tableBody.innerHTML = "";

  const summary = {};

  attendanceData.forEach(record => {
    const weekStart = getWeekStartDate(record.date);
    const key = weekStart + '_' + record.student;

    if (!summary[key]) {
      summary[key] = { week: weekStart, student: record.student, Present: 0, Absent: 0, Late: 0, total: 0 };
    }

    summary[key][record.status] += 1;
    summary[key].total += 1;
  });

  Object.values(summary).forEach(entry => {
    const row = `<tr>
      <td>${entry.week}</td>
      <td>${entry.student}</td>
      <td>${entry.Present}</td>
      <td>${entry.Absent}</td>
      <td>${entry.Late}</td>
      <td>${entry.total}</td>
    </tr>`;
    tableBody.innerHTML += row;
  });
}
</script>
<button onclick="signOut()">Sign Out</button>

</body>
</script>

</body>
</html>
